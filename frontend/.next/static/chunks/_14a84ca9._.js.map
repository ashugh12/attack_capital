{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/app-config.ts"],"sourcesContent":["import type { AppConfig } from './lib/types';\n\nexport const APP_CONFIG_DEFAULTS: AppConfig = {\n  companyName: 'LiveKit',\n  pageTitle: 'LiveKit Voice Agent',\n  pageDescription: 'A voice agent built with LiveKit',\n\n  supportsChatInput: true,\n  supportsVideoInput: true,\n  supportsScreenShare: true,\n  isPreConnectBufferEnabled: true,\n\n  logo: '/lk-logo.svg',\n  accent: '#002cf2',\n  logoDark: '/lk-logo-dark.svg',\n  accentDark: '#1fd5f9',\n  startButtonText: 'Start call',\n\n  agentName: undefined,\n};\n"],"names":[],"mappings":";;;;AAEO,MAAM,sBAAiC;IAC5C,aAAa;IACb,WAAW;IACX,iBAAiB;IAEjB,mBAAmB;IACnB,oBAAoB;IACpB,qBAAqB;IACrB,2BAA2B;IAE3B,MAAM;IACN,QAAQ;IACR,UAAU;IACV,YAAY;IACZ,iBAAiB;IAEjB,WAAW;AACb","debugId":null}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/lib/utils.ts"],"sourcesContent":["import { cache } from 'react';\nimport { type ClassValue, clsx } from 'clsx';\nimport { Room } from 'livekit-client';\nimport { twMerge } from 'tailwind-merge';\nimport type { ReceivedChatMessage, TextStreamData } from '@livekit/components-react';\nimport { APP_CONFIG_DEFAULTS } from '@/app-config';\nimport type { AppConfig, SandboxConfig } from './types';\n\nexport const CONFIG_ENDPOINT = process.env.NEXT_PUBLIC_APP_CONFIG_ENDPOINT;\nexport const SANDBOX_ID = process.env.SANDBOX_ID;\n\nexport const THEME_STORAGE_KEY = 'theme-mode';\nexport const THEME_MEDIA_QUERY = '(prefers-color-scheme: dark)';\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\nexport function transcriptionToChatMessage(\n  textStream: TextStreamData,\n  room: Room\n): ReceivedChatMessage {\n  return {\n    id: textStream.streamInfo.id,\n    timestamp: textStream.streamInfo.timestamp,\n    message: textStream.text,\n    from:\n      textStream.participantInfo.identity === room.localParticipant.identity\n        ? room.localParticipant\n        : Array.from(room.remoteParticipants.values()).find(\n            (p) => p.identity === textStream.participantInfo.identity\n          ),\n  };\n}\n\n// https://react.dev/reference/react/cache#caveats\n// > React will invalidate the cache for all memoized functions for each server request.\nexport const getAppConfig = cache(async (headers: Headers): Promise<AppConfig> => {\n  if (CONFIG_ENDPOINT) {\n    const sandboxId = SANDBOX_ID ?? headers.get('x-sandbox-id') ?? '';\n\n    try {\n      if (!sandboxId) {\n        throw new Error('Sandbox ID is required');\n      }\n\n      const response = await fetch(CONFIG_ENDPOINT, {\n        cache: 'no-store',\n        headers: { 'X-Sandbox-ID': sandboxId },\n      });\n\n      const remoteConfig: SandboxConfig = await response.json();\n      const config: AppConfig = { sandboxId, ...APP_CONFIG_DEFAULTS };\n\n      for (const [key, entry] of Object.entries(remoteConfig)) {\n        if (entry === null) continue;\n        // Only include app config entries that are declared in defaults and, if set,\n        // share the same primitive type as the default value.\n        if (\n          (key in APP_CONFIG_DEFAULTS &&\n            APP_CONFIG_DEFAULTS[key as keyof AppConfig] === undefined) ||\n          (typeof config[key as keyof AppConfig] === entry.type &&\n            typeof config[key as keyof AppConfig] === typeof entry.value)\n        ) {\n          // @ts-expect-error I'm not sure quite how to appease TypeScript, but we've thoroughly checked types above\n          config[key as keyof AppConfig] = entry.value as AppConfig[keyof AppConfig];\n        }\n      }\n\n      return config;\n    } catch (error) {\n      console.error('ERROR: getAppConfig() - lib/utils.ts', error);\n    }\n  }\n\n  return APP_CONFIG_DEFAULTS;\n});\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAQ+B;AAR/B;AACA;AAEA;AAEA;;;;;AAGO,MAAM,kBAAkB,2KAAO,CAAC,GAAG,CAAC,+BAA+B;AACnE,MAAM,aAAa,2KAAO,CAAC,GAAG,CAAC,UAAU;AAEzC,MAAM,oBAAoB;AAC1B,MAAM,oBAAoB;AAE1B,SAAS;IAAG,IAAA,IAAA,OAAA,UAAA,QAAA,AAAG,SAAH,UAAA,OAAA,OAAA,GAAA,OAAA,MAAA;QAAG,OAAH,QAAA,SAAA,CAAA,KAAuB;;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB;AAEO,SAAS,2BACd,UAA0B,EAC1B,IAAU;IAEV,OAAO;QACL,IAAI,WAAW,UAAU,CAAC,EAAE;QAC5B,WAAW,WAAW,UAAU,CAAC,SAAS;QAC1C,SAAS,WAAW,IAAI;QACxB,MACE,WAAW,eAAe,CAAC,QAAQ,KAAK,KAAK,gBAAgB,CAAC,QAAQ,GAClE,KAAK,gBAAgB,GACrB,MAAM,IAAI,CAAC,KAAK,kBAAkB,CAAC,MAAM,IAAI,IAAI,CAC/C,CAAC,IAAM,EAAE,QAAQ,KAAK,WAAW,eAAe,CAAC,QAAQ;IAEnE;AACF;AAIO,MAAM,eAAe,IAAA,sKAAK,EAAC,OAAO;IACvC,IAAI,iBAAiB;YACD;QAAlB,MAAM,YAAY,CAAA,OAAA,uBAAA,wBAAA,aAAc,QAAQ,GAAG,CAAC,6BAA1B,kBAAA,OAA6C;QAE/D,IAAI;YACF,IAAI,CAAC,WAAW;gBACd,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,WAAW,MAAM,MAAM,iBAAiB;gBAC5C,OAAO;gBACP,SAAS;oBAAE,gBAAgB;gBAAU;YACvC;YAEA,MAAM,eAA8B,MAAM,SAAS,IAAI;YACvD,MAAM,SAAoB;gBAAE;gBAAW,GAAG,uIAAmB;YAAC;YAE9D,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,cAAe;gBACvD,IAAI,UAAU,MAAM;gBACpB,6EAA6E;gBAC7E,sDAAsD;gBACtD,IACE,AAAC,OAAO,uIAAmB,IACzB,uIAAmB,CAAC,IAAuB,KAAK,aACjD,OAAO,MAAM,CAAC,IAAuB,KAAK,MAAM,IAAI,IACnD,OAAO,MAAM,CAAC,IAAuB,KAAK,OAAO,MAAM,KAAK,EAC9D;oBACA,0GAA0G;oBAC1G,MAAM,CAAC,IAAuB,GAAG,MAAM,KAAK;gBAC9C;YACF;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wCAAwC;QACxD;IACF;IAEA,OAAO,uIAAmB;AAC5B","debugId":null}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/ui/alert.tsx"],"sourcesContent":["import * as React from 'react';\nimport { type VariantProps, cva } from 'class-variance-authority';\nimport { cn } from '@/lib/utils';\n\nconst alertVariants = cva(\n  [\n    'relative w-full rounded-lg border px-4 py-3 text-sm grid grid-cols-[0_1fr] gap-y-0.5 items-start',\n    'has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] has-[>svg]:gap-x-3 [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current',\n  ],\n  {\n    variants: {\n      variant: {\n        default: 'bg-card text-card-foreground',\n        destructive: [\n          'text-destructive-foreground bg-destructive border-destructive-border',\n          '[&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/90',\n        ],\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  }\n);\n\nfunction Alert({\n  className,\n  variant,\n  ...props\n}: React.ComponentProps<'div'> & VariantProps<typeof alertVariants>) {\n  return (\n    <div\n      data-slot=\"alert\"\n      role=\"alert\"\n      className={cn(alertVariants({ variant }), className)}\n      {...props}\n    />\n  );\n}\n\nfunction AlertTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-title\"\n      className={cn('col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight', className)}\n      {...props}\n    />\n  );\n}\n\nfunction AlertDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-description\"\n      className={cn(\n        'text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed',\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Alert, AlertTitle, AlertDescription };\n"],"names":[],"mappings":";;;;;;;;;AACA;AACA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB;IACE;IACA;CACD,EACD;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;gBACX;gBACA;aACD;QACH;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,KAIoD;QAJpD,EACb,SAAS,EACT,OAAO,EACP,GAAG,OAC8D,GAJpD;IAKb,qBACE,6LAAC;QACC,aAAU;QACV,MAAK;QACL,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAbS;AAeT,SAAS,WAAW,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IAClB,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,+DAA+D;QAC5E,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,iBAAiB,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACxB,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kGACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS","debugId":null}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/alert-toast.tsx"],"sourcesContent":["'use client';\n\nimport { ReactNode } from 'react';\nimport { toast as sonnerToast } from 'sonner';\nimport { WarningIcon } from '@phosphor-icons/react/dist/ssr';\nimport { Alert, AlertDescription, AlertTitle } from './ui/alert';\n\ninterface ToastProps {\n  id: string | number;\n  title: ReactNode;\n  description: ReactNode;\n}\n\nexport function toastAlert(toast: Omit<ToastProps, 'id'>) {\n  return sonnerToast.custom(\n    (id) => <AlertToast id={id} title={toast.title} description={toast.description} />,\n    { duration: 10_000 }\n  );\n}\n\nfunction AlertToast(props: ToastProps) {\n  const { title, description, id } = props;\n\n  return (\n    <Alert onClick={() => sonnerToast.dismiss(id)} className=\"bg-accent\">\n      <WarningIcon weight=\"bold\" />\n      <AlertTitle>{title}</AlertTitle>\n      {description && <AlertDescription>{description}</AlertDescription>}\n    </Alert>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AALA;;;;;AAaO,SAAS,WAAW,KAA6B;IACtD,OAAO,oJAAW,CAAC,MAAM,CACvB,CAAC,mBAAO,6LAAC;YAAW,IAAI;YAAI,OAAO,MAAM,KAAK;YAAE,aAAa,MAAM,WAAW;;;;;kBAC9E;QAAE,UAAU;IAAO;AAEvB;AAEA,SAAS,WAAW,KAAiB;IACnC,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,EAAE,EAAE,GAAG;IAEnC,qBACE,6LAAC,sIAAK;QAAC,SAAS,IAAM,oJAAW,CAAC,OAAO,CAAC;QAAK,WAAU;;0BACvD,6LAAC,8LAAW;gBAAC,QAAO;;;;;;0BACpB,6LAAC,2IAAU;0BAAE;;;;;;YACZ,6BAAe,6LAAC,iJAAgB;0BAAE;;;;;;;;;;;;AAGzC;KAVS","debugId":null}},
    {"offset": {"line": 270, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react';\nimport { type VariantProps, cva } from 'class-variance-authority';\nimport { Slot } from '@radix-ui/react-slot';\nimport { cn } from '@/lib/utils';\n\nconst buttonVariants = cva(\n  [\n    'text-xs font-bold tracking-wider uppercase whitespace-nowrap',\n    'inline-flex items-center justify-center gap-2 shrink-0 rounded-full cursor-pointer outline-none transition-colors duration-300',\n    'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n    'disabled:pointer-events-none disabled:opacity-50',\n    'aria-invalid:ring-destructive/20 aria-invalid:border-destructive dark:aria-invalid:ring-destructive/40 ',\n    \"[&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0\",\n  ],\n  {\n    variants: {\n      variant: {\n        default: 'bg-button text-button-foreground hover:bg-muted focus:bg-muted',\n        destructive: [\n          'bg-destructive text-destructive-foreground',\n          'hover:bg-destructive-hover focus:bg-destructive-hover focus-visible:ring-destructive-foreground/20',\n          'dark:focus-visible:ring-destructive-foreground/40',\n        ],\n        outline: [\n          'border bg-background',\n          'hover:bg-accent hover:text-accent-foreground',\n          'dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        ],\n        primary: 'bg-primary text-primary-foreground hover:bg-primary-hover focus:bg-primary-hover',\n        secondary: 'bg-secondary text-secondary-foregroun hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  }\n);\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean;\n  }) {\n  const Comp = asChild ? Slot : 'button';\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  );\n}\n\nexport { Button, buttonVariants };\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB;IACE;IACA;IACA;IACA;IACA;IACA;CACD,EACD;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;gBACX;gBACA;gBACA;aACD;YACD,SAAS;gBACP;gBACA;gBACA;aACD;YACD,SAAS;YACT,WAAW;YACX,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,KASb;QATa,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF,GATa;IAUd,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS","debugId":null}},
    {"offset": {"line": 350, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/livekit/chat/chat-input.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\n\ninterface ChatInputProps extends React.HTMLAttributes<HTMLFormElement> {\n  onSend?: (message: string) => void;\n  disabled?: boolean;\n}\n\nexport function ChatInput({ onSend, className, disabled, ...props }: ChatInputProps) {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [message, setMessage] = useState<string>('');\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    props.onSubmit?.(e);\n    onSend?.(message);\n    setMessage('');\n  };\n\n  const isDisabled = disabled || message.trim().length === 0;\n\n  useEffect(() => {\n    if (disabled) return;\n    // when not disabled refocus on input\n    inputRef.current?.focus();\n  }, [disabled]);\n\n  return (\n    <form\n      {...props}\n      onSubmit={handleSubmit}\n      className={cn('flex items-center gap-2 rounded-md pl-1 text-sm', className)}\n    >\n      <input\n        autoFocus\n        ref={inputRef}\n        type=\"text\"\n        value={message}\n        disabled={disabled}\n        placeholder=\"Type something...\"\n        onChange={(e) => setMessage(e.target.value)}\n        className=\"flex-1 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50\"\n      />\n      <Button\n        size=\"sm\"\n        type=\"submit\"\n        variant={isDisabled ? 'secondary' : 'primary'}\n        disabled={isDisabled}\n        className=\"font-mono\"\n      >\n        SEND\n      </Button>\n    </form>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;;AAOO,SAAS,UAAU,KAAyD;QAAzD,EAAE,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAuB,GAAzD;;IACxB,MAAM,WAAW,IAAA,uKAAM,EAAmB;IAC1C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAS;IAE/C,MAAM,eAAe,CAAC;YAEpB;QADA,EAAE,cAAc;SAChB,kBAAA,MAAM,QAAQ,cAAd,sCAAA,qBAAA,OAAiB;QACjB,mBAAA,6BAAA,OAAS;QACT,WAAW;IACb;IAEA,MAAM,aAAa,YAAY,QAAQ,IAAI,GAAG,MAAM,KAAK;IAEzD,IAAA,0KAAS;+BAAC;gBAER,qCAAqC;YACrC;YAFA,IAAI,UAAU;aAEd,oBAAA,SAAS,OAAO,cAAhB,wCAAA,kBAAkB,KAAK;QACzB;8BAAG;QAAC;KAAS;IAEb,qBACE,6LAAC;QACE,GAAG,KAAK;QACT,UAAU;QACV,WAAW,IAAA,qHAAE,EAAC,mDAAmD;;0BAEjE,6LAAC;gBACC,SAAS;gBACT,KAAK;gBACL,MAAK;gBACL,OAAO;gBACP,UAAU;gBACV,aAAY;gBACZ,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;gBAC1C,WAAU;;;;;;0BAEZ,6LAAC,wIAAM;gBACL,MAAK;gBACL,MAAK;gBACL,SAAS,aAAa,cAAc;gBACpC,UAAU;gBACV,WAAU;0BACX;;;;;;;;;;;;AAKP;GA9CgB;KAAA","debugId":null}},
    {"offset": {"line": 435, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/livekit/device-select.tsx"],"sourcesContent":["'use client';\n\nimport { useLayoutEffect, useState } from 'react';\nimport { cva } from 'class-variance-authority';\nimport { LocalAudioTrack, LocalVideoTrack } from 'livekit-client';\nimport { useMaybeRoomContext, useMediaDeviceSelect } from '@livekit/components-react';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { cn } from '@/lib/utils';\n\ntype DeviceSelectProps = React.ComponentProps<typeof SelectTrigger> & {\n  kind: MediaDeviceKind;\n  track?: LocalAudioTrack | LocalVideoTrack | undefined;\n  requestPermissions?: boolean;\n  onMediaDeviceError?: (error: Error) => void;\n  initialSelection?: string;\n  onActiveDeviceChange?: (deviceId: string) => void;\n  onDeviceListChange?: (devices: MediaDeviceInfo[]) => void;\n  variant?: 'default' | 'small';\n};\n\nconst selectVariants = cva(\n  [\n    'w-full rounded-full px-3 py-2 text-sm cursor-pointer',\n    'disabled:not-allowed hover:bg-button-hover focus:bg-button-hover',\n  ],\n  {\n    variants: {\n      size: {\n        default: 'w-[180px]',\n        sm: 'w-auto',\n      },\n    },\n    defaultVariants: {\n      size: 'default',\n    },\n  }\n);\n\nexport function DeviceSelect({\n  kind,\n  track,\n  requestPermissions,\n  onMediaDeviceError,\n  // initialSelection,\n  // onActiveDeviceChange,\n  // onDeviceListChange,\n  ...props\n}: DeviceSelectProps) {\n  const size = props.size || 'default';\n\n  const [open, setOpen] = useState(false);\n  const [requestPermissionsState, setRequestPermissionsState] = useState(requestPermissions);\n\n  const room = useMaybeRoomContext();\n  const { devices, activeDeviceId, setActiveMediaDevice } = useMediaDeviceSelect({\n    kind,\n    room,\n    track,\n    requestPermissions: requestPermissionsState,\n    onError: onMediaDeviceError,\n  });\n\n  // When the select opens, ensure that media devices are re-requested in case when they were last\n  // requested, permissions were not granted\n  useLayoutEffect(() => {\n    if (open) {\n      setRequestPermissionsState(true);\n    }\n  }, [open]);\n\n  return (\n    <Select\n      value={activeDeviceId}\n      onValueChange={setActiveMediaDevice}\n      open={open}\n      onOpenChange={setOpen}\n    >\n      <SelectTrigger className={cn(selectVariants({ size }), props.className)}>\n        {size !== 'sm' && (\n          <SelectValue className=\"font-mono text-sm\" placeholder={`Select a ${kind}`} />\n        )}\n      </SelectTrigger>\n      <SelectContent>\n        {devices\n          .filter((d) => d.deviceId !== '')\n          .map((device) => (\n            <SelectItem key={device.deviceId} value={device.deviceId} className=\"font-mono text-xs\">\n              {device.label}\n            </SelectItem>\n          ))}\n      </SelectContent>\n    </Select>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AAAA;;;;;;AAQA;;;AAbA;;;;;;AA0BA,MAAM,iBAAiB,IAAA,0KAAG,EACxB;IACE;IACA;CACD,EACD;IACE,UAAU;QACR,MAAM;YACJ,SAAS;YACT,IAAI;QACN;IACF;IACA,iBAAiB;QACf,MAAM;IACR;AACF;AAGK,SAAS,aAAa,KAST;QATS,EAC3B,IAAI,EACJ,KAAK,EACL,kBAAkB,EAClB,kBAAkB,EAClB,oBAAoB;IACpB,wBAAwB;IACxB,sBAAsB;IACtB,GAAG,OACe,GATS;;IAU3B,MAAM,OAAO,MAAM,IAAI,IAAI;IAE3B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,yBAAyB,2BAA2B,GAAG,IAAA,yKAAQ,EAAC;IAEvE,MAAM,OAAO,IAAA,uPAAmB;IAChC,MAAM,EAAE,OAAO,EAAE,cAAc,EAAE,oBAAoB,EAAE,GAAG,IAAA,sPAAoB,EAAC;QAC7E;QACA;QACA;QACA,oBAAoB;QACpB,SAAS;IACX;IAEA,gGAAgG;IAChG,0CAA0C;IAC1C,IAAA,gLAAe;wCAAC;YACd,IAAI,MAAM;gBACR,2BAA2B;YAC7B;QACF;uCAAG;QAAC;KAAK;IAET,qBACE,6LAAC;QACC,OAAO;QACP,eAAe;QACf,MAAM;QACN,cAAc;;0BAEd,6LAAC;gBAAc,WAAW,IAAA,qHAAE,EAAC,eAAe;oBAAE;gBAAK,IAAI,MAAM,SAAS;0BACnE,SAAS,sBACR,6LAAC;oBAAY,WAAU;oBAAoB,aAAa,AAAC,YAAgB,OAAL;;;;;;;;;;;0BAGxE,6LAAC;0BACE,QACE,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK,IAC7B,GAAG,CAAC,CAAC,uBACJ,6LAAC;wBAAiC,OAAO,OAAO,QAAQ;wBAAE,WAAU;kCACjE,OAAO,KAAK;uBADE,OAAO,QAAQ;;;;;;;;;;;;;;;;AAO5C;GAvDgB;;QAeD,uPAAmB;QAC0B,sPAAoB;;;KAhBhE","debugId":null}},
    {"offset": {"line": 561, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/livekit/track-toggle.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { Track } from 'livekit-client';\nimport { useTrackToggle } from '@livekit/components-react';\nimport {\n  MicrophoneIcon,\n  MicrophoneSlashIcon,\n  MonitorArrowUpIcon,\n  SpinnerIcon,\n  VideoCameraIcon,\n  VideoCameraSlashIcon,\n} from '@phosphor-icons/react/dist/ssr';\nimport { Toggle } from '@/components/ui/toggle';\nimport { cn } from '@/lib/utils';\n\nexport type TrackToggleProps = React.ComponentProps<typeof Toggle> & {\n  source: Parameters<typeof useTrackToggle>[0]['source'];\n  pending?: boolean;\n};\n\nfunction getSourceIcon(source: Track.Source, enabled: boolean, pending = false) {\n  if (pending) {\n    return SpinnerIcon;\n  }\n\n  switch (source) {\n    case Track.Source.Microphone:\n      return enabled ? MicrophoneIcon : MicrophoneSlashIcon;\n    case Track.Source.Camera:\n      return enabled ? VideoCameraIcon : VideoCameraSlashIcon;\n    case Track.Source.ScreenShare:\n      return MonitorArrowUpIcon;\n    default:\n      return React.Fragment;\n  }\n}\n\nexport function TrackToggle({ source, pressed, pending, className, ...props }: TrackToggleProps) {\n  const IconComponent = getSourceIcon(source, pressed ?? false, pending);\n\n  return (\n    <Toggle pressed={pressed} aria-label={`Toggle ${source}`} className={cn(className)} {...props}>\n      <IconComponent weight=\"bold\" className={cn(pending && 'animate-spin')} />\n      {props.children}\n    </Toggle>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;AASA;AAdA;;;;;;;AAqBA,SAAS,cAAc,MAAoB,EAAE,OAAgB;QAAE,UAAA,iEAAU;IACvE,IAAI,SAAS;QACX,OAAO,8LAAW;IACpB;IAEA,OAAQ;QACN,KAAK,kLAAK,CAAC,MAAM,CAAC,UAAU;YAC1B,OAAO,UAAU,oMAAc,GAAG,8MAAmB;QACvD,KAAK,kLAAK,CAAC,MAAM,CAAC,MAAM;YACtB,OAAO,UAAU,sMAAe,GAAG,gNAAoB;QACzD,KAAK,kLAAK,CAAC,MAAM,CAAC,WAAW;YAC3B,OAAO,4MAAkB;QAC3B;YACE,OAAO,yKAAc;IACzB;AACF;AAEO,SAAS,YAAY,KAAmE;QAAnE,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE,GAAG,OAAyB,GAAnE;IAC1B,MAAM,gBAAgB,cAAc,QAAQ,oBAAA,qBAAA,UAAW,OAAO;IAE9D,qBACE,6LAAC;QAAO,SAAS;QAAS,cAAY,AAAC,UAAgB,OAAP;QAAU,WAAW,IAAA,qHAAE,EAAC;QAAa,GAAG,KAAK;;0BAC3F,6LAAC;gBAAc,QAAO;gBAAO,WAAW,IAAA,qHAAE,EAAC,WAAW;;;;;;YACrD,MAAM,QAAQ;;;;;;;AAGrB;KATgB","debugId":null}},
    {"offset": {"line": 638, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/livekit/agent-control-bar/hooks/use-publish-permissions.ts"],"sourcesContent":["import { Track } from 'livekit-client';\nimport { useLocalParticipantPermissions } from '@livekit/components-react';\n\nconst trackSourceToProtocol = (source: Track.Source) => {\n  // NOTE: this mapping avoids importing the protocol package as that leads to a significant bundle size increase\n  switch (source) {\n    case Track.Source.Camera:\n      return 1;\n    case Track.Source.Microphone:\n      return 2;\n    case Track.Source.ScreenShare:\n      return 3;\n    default:\n      return 0;\n  }\n};\n\nexport interface PublishPermissions {\n  camera: boolean;\n  microphone: boolean;\n  screenShare: boolean;\n  data: boolean;\n}\n\nexport function usePublishPermissions(): PublishPermissions {\n  const localPermissions = useLocalParticipantPermissions();\n\n  const canPublishSource = (source: Track.Source) => {\n    return (\n      !!localPermissions?.canPublish &&\n      (localPermissions.canPublishSources.length === 0 ||\n        localPermissions.canPublishSources.includes(trackSourceToProtocol(source)))\n    );\n  };\n\n  return {\n    camera: canPublishSource(Track.Source.Camera),\n    microphone: canPublishSource(Track.Source.Microphone),\n    screenShare: canPublishSource(Track.Source.ScreenShare),\n    data: localPermissions?.canPublishData ?? false,\n  };\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAEA,MAAM,wBAAwB,CAAC;IAC7B,+GAA+G;IAC/G,OAAQ;QACN,KAAK,kLAAK,CAAC,MAAM,CAAC,MAAM;YACtB,OAAO;QACT,KAAK,kLAAK,CAAC,MAAM,CAAC,UAAU;YAC1B,OAAO;QACT,KAAK,kLAAK,CAAC,MAAM,CAAC,WAAW;YAC3B,OAAO;QACT;YACE,OAAO;IACX;AACF;AASO,SAAS;;IACd,MAAM,mBAAmB,IAAA,0QAA8B;IAEvD,MAAM,mBAAmB,CAAC;QACxB,OACE,CAAC,EAAC,6BAAA,uCAAA,iBAAkB,UAAU,KAC9B,CAAC,iBAAiB,iBAAiB,CAAC,MAAM,KAAK,KAC7C,iBAAiB,iBAAiB,CAAC,QAAQ,CAAC,sBAAsB,QAAQ;IAEhF;QAMQ;IAJR,OAAO;QACL,QAAQ,iBAAiB,kLAAK,CAAC,MAAM,CAAC,MAAM;QAC5C,YAAY,iBAAiB,kLAAK,CAAC,MAAM,CAAC,UAAU;QACpD,aAAa,iBAAiB,kLAAK,CAAC,MAAM,CAAC,WAAW;QACtD,MAAM,CAAA,mCAAA,6BAAA,uCAAA,iBAAkB,cAAc,cAAhC,8CAAA,mCAAoC;IAC5C;AACF;GAjBgB;;QACW,0QAA8B","debugId":null}},
    {"offset": {"line": 686, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/livekit/agent-control-bar/hooks/use-agent-control-bar.ts"],"sourcesContent":["import * as React from 'react';\nimport { Track } from 'livekit-client';\nimport {\n  type TrackReferenceOrPlaceholder,\n  useLocalParticipant,\n  usePersistentUserChoices,\n  useRoomContext,\n  useTrackToggle,\n} from '@livekit/components-react';\nimport { usePublishPermissions } from './use-publish-permissions';\n\nexport interface ControlBarControls {\n  microphone?: boolean;\n  screenShare?: boolean;\n  chat?: boolean;\n  camera?: boolean;\n  leave?: boolean;\n}\n\nexport interface UseAgentControlBarProps {\n  controls?: ControlBarControls;\n  saveUserChoices?: boolean;\n  onDeviceError?: (error: { source: Track.Source; error: Error }) => void;\n}\n\nexport interface UseAgentControlBarReturn {\n  micTrackRef: TrackReferenceOrPlaceholder;\n  visibleControls: ControlBarControls;\n  microphoneToggle: ReturnType<typeof useTrackToggle<Track.Source.Microphone>>;\n  cameraToggle: ReturnType<typeof useTrackToggle<Track.Source.Camera>>;\n  screenShareToggle: ReturnType<typeof useTrackToggle<Track.Source.ScreenShare>>;\n  handleDisconnect: () => void;\n  handleAudioDeviceChange: (deviceId: string) => void;\n  handleVideoDeviceChange: (deviceId: string) => void;\n}\n\nexport function useAgentControlBar(props: UseAgentControlBarProps = {}): UseAgentControlBarReturn {\n  const { controls, saveUserChoices = true } = props;\n  const visibleControls = {\n    leave: true,\n    ...controls,\n  };\n  const { microphoneTrack, localParticipant } = useLocalParticipant();\n  const publishPermissions = usePublishPermissions();\n  const room = useRoomContext();\n\n  const microphoneToggle = useTrackToggle({\n    source: Track.Source.Microphone,\n    onDeviceError: (error) => props.onDeviceError?.({ source: Track.Source.Microphone, error }),\n  });\n  const cameraToggle = useTrackToggle({\n    source: Track.Source.Camera,\n    onDeviceError: (error) => props.onDeviceError?.({ source: Track.Source.Camera, error }),\n  });\n  const screenShareToggle = useTrackToggle({\n    source: Track.Source.ScreenShare,\n    onDeviceError: (error) => props.onDeviceError?.({ source: Track.Source.ScreenShare, error }),\n  });\n\n  const micTrackRef = React.useMemo(() => {\n    return {\n      participant: localParticipant,\n      source: Track.Source.Microphone,\n      publication: microphoneTrack,\n    };\n  }, [localParticipant, microphoneTrack]);\n\n  visibleControls.microphone ??= publishPermissions.microphone;\n  visibleControls.screenShare ??= publishPermissions.screenShare;\n  visibleControls.camera ??= publishPermissions.camera;\n  visibleControls.chat ??= publishPermissions.data;\n\n  const {\n    saveAudioInputEnabled,\n    saveAudioInputDeviceId,\n    saveVideoInputEnabled,\n    saveVideoInputDeviceId,\n  } = usePersistentUserChoices({\n    preventSave: !saveUserChoices,\n  });\n\n  const handleDisconnect = React.useCallback(async () => {\n    if (room) {\n      await room.disconnect();\n    }\n  }, [room]);\n\n  const handleAudioDeviceChange = React.useCallback(\n    (deviceId: string) => {\n      saveAudioInputDeviceId(deviceId ?? 'default');\n    },\n    [saveAudioInputDeviceId]\n  );\n\n  const handleVideoDeviceChange = React.useCallback(\n    (deviceId: string) => {\n      saveVideoInputDeviceId(deviceId ?? 'default');\n    },\n    [saveVideoInputDeviceId]\n  );\n\n  const handleToggleCamera = React.useCallback(\n    async (enabled?: boolean) => {\n      if (screenShareToggle.enabled) {\n        screenShareToggle.toggle(false);\n      }\n      await cameraToggle.toggle(enabled);\n      // persist video input enabled preference\n      saveVideoInputEnabled(!cameraToggle.enabled);\n    },\n    [cameraToggle.enabled, screenShareToggle.enabled]\n  );\n\n  const handleToggleMicrophone = React.useCallback(\n    async (enabled?: boolean) => {\n      await microphoneToggle.toggle(enabled);\n      // persist audio input enabled preference\n      saveAudioInputEnabled(!microphoneToggle.enabled);\n    },\n    [microphoneToggle.enabled]\n  );\n\n  const handleToggleScreenShare = React.useCallback(\n    async (enabled?: boolean) => {\n      if (cameraToggle.enabled) {\n        cameraToggle.toggle(false);\n      }\n      await screenShareToggle.toggle(enabled);\n    },\n    [screenShareToggle.enabled, cameraToggle.enabled]\n  );\n\n  return {\n    micTrackRef,\n    visibleControls,\n    cameraToggle: {\n      ...cameraToggle,\n      toggle: handleToggleCamera,\n    },\n    microphoneToggle: {\n      ...microphoneToggle,\n      toggle: handleToggleMicrophone,\n    },\n    screenShareToggle: {\n      ...screenShareToggle,\n      toggle: handleToggleScreenShare,\n    },\n    handleDisconnect,\n    handleAudioDeviceChange,\n    handleVideoDeviceChange,\n  };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 867, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/livekit/agent-control-bar/agent-control-bar.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { useCallback } from 'react';\nimport { Track } from 'livekit-client';\nimport { BarVisualizer, useRemoteParticipants } from '@livekit/components-react';\nimport { ChatTextIcon, PhoneDisconnectIcon } from '@phosphor-icons/react/dist/ssr';\nimport { ChatInput } from '@/components/livekit/chat/chat-input';\nimport { Button } from '@/components/ui/button';\nimport { Toggle } from '@/components/ui/toggle';\nimport { AppConfig } from '@/lib/types';\nimport { cn } from '@/lib/utils';\nimport { DeviceSelect } from '../device-select';\nimport { TrackToggle } from '../track-toggle';\nimport { UseAgentControlBarProps, useAgentControlBar } from './hooks/use-agent-control-bar';\n\nexport interface AgentControlBarProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    UseAgentControlBarProps {\n  capabilities: Pick<AppConfig, 'supportsChatInput' | 'supportsVideoInput' | 'supportsScreenShare'>;\n  onChatOpenChange?: (open: boolean) => void;\n  onSendMessage?: (message: string) => Promise<void>;\n  onDisconnect?: () => void;\n  onDeviceError?: (error: { source: Track.Source; error: Error }) => void;\n}\n\n/**\n * A control bar specifically designed for voice assistant interfaces\n */\nexport function AgentControlBar({\n  controls,\n  saveUserChoices = true,\n  capabilities,\n  className,\n  onSendMessage,\n  onChatOpenChange,\n  onDisconnect,\n  onDeviceError,\n  ...props\n}: AgentControlBarProps) {\n  const participants = useRemoteParticipants();\n  const [chatOpen, setChatOpen] = React.useState(false);\n  const [isSendingMessage, setIsSendingMessage] = React.useState(false);\n\n  const isAgentAvailable = participants.some((p) => p.isAgent);\n  const isInputDisabled = !chatOpen || !isAgentAvailable || isSendingMessage;\n\n  const [isDisconnecting, setIsDisconnecting] = React.useState(false);\n\n  const {\n    micTrackRef,\n    visibleControls,\n    cameraToggle,\n    microphoneToggle,\n    screenShareToggle,\n    handleAudioDeviceChange,\n    handleVideoDeviceChange,\n    handleDisconnect,\n  } = useAgentControlBar({\n    controls,\n    saveUserChoices,\n  });\n\n  const handleSendMessage = async (message: string) => {\n    setIsSendingMessage(true);\n    try {\n      await onSendMessage?.(message);\n    } finally {\n      setIsSendingMessage(false);\n    }\n  };\n\n  const onLeave = async () => {\n    setIsDisconnecting(true);\n    await handleDisconnect();\n    setIsDisconnecting(false);\n    onDisconnect?.();\n  };\n\n  React.useEffect(() => {\n    onChatOpenChange?.(chatOpen);\n  }, [chatOpen, onChatOpenChange]);\n\n  const onMicrophoneDeviceSelectError = useCallback(\n    (error: Error) => {\n      onDeviceError?.({ source: Track.Source.Microphone, error });\n    },\n    [onDeviceError]\n  );\n  const onCameraDeviceSelectError = useCallback(\n    (error: Error) => {\n      onDeviceError?.({ source: Track.Source.Camera, error });\n    },\n    [onDeviceError]\n  );\n\n  return (\n    <div\n      aria-label=\"Voice assistant controls\"\n      className={cn(\n        'bg-background border-bg2 dark:border-separator1 flex flex-col rounded-[31px] border p-3 drop-shadow-md/3',\n        className\n      )}\n      {...props}\n    >\n      {capabilities.supportsChatInput && (\n        <div\n          inert={!chatOpen}\n          className={cn(\n            'overflow-hidden transition-[height] duration-300 ease-out',\n            chatOpen ? 'h-[57px]' : 'h-0'\n          )}\n        >\n          <div className=\"flex h-8 w-full\">\n            <ChatInput onSend={handleSendMessage} disabled={isInputDisabled} className=\"w-full\" />\n          </div>\n          <hr className=\"border-bg2 my-3\" />\n        </div>\n      )}\n\n      <div className=\"flex flex-row justify-between gap-1\">\n        <div className=\"flex gap-1\">\n          {visibleControls.microphone && (\n            <div className=\"flex items-center gap-0\">\n              <TrackToggle\n                variant=\"primary\"\n                source={Track.Source.Microphone}\n                pressed={microphoneToggle.enabled}\n                disabled={microphoneToggle.pending}\n                onPressedChange={microphoneToggle.toggle}\n                className=\"peer/track group/track relative w-auto pr-3 pl-3 md:rounded-r-none md:border-r-0 md:pr-2\"\n              >\n                <BarVisualizer\n                  barCount={3}\n                  trackRef={micTrackRef}\n                  options={{ minHeight: 5 }}\n                  className=\"flex h-full w-auto items-center justify-center gap-0.5\"\n                >\n                  <span\n                    className={cn([\n                      'h-full w-0.5 origin-center rounded-2xl',\n                      'group-data-[state=on]/track:bg-fg1 group-data-[state=off]/track:bg-destructive-foreground',\n                      'data-lk-muted:bg-muted',\n                    ])}\n                  ></span>\n                </BarVisualizer>\n              </TrackToggle>\n              <hr className=\"bg-separator1 peer-data-[state=off]/track:bg-separatorSerious relative z-10 -mr-px hidden h-4 w-px md:block\" />\n              <DeviceSelect\n                size=\"sm\"\n                kind=\"audioinput\"\n                requestPermissions={false}\n                onMediaDeviceError={onMicrophoneDeviceSelectError}\n                onActiveDeviceChange={handleAudioDeviceChange}\n                className={cn([\n                  'pl-2',\n                  'peer-data-[state=off]/track:text-destructive-foreground',\n                  'hover:text-fg1 focus:text-fg1',\n                  'hover:peer-data-[state=off]/track:text-destructive-foreground focus:peer-data-[state=off]/track:text-destructive-foreground',\n                  'hidden rounded-l-none md:block',\n                ])}\n              />\n            </div>\n          )}\n\n          {capabilities.supportsVideoInput && visibleControls.camera && (\n            <div className=\"flex items-center gap-0\">\n              <TrackToggle\n                variant=\"primary\"\n                source={Track.Source.Camera}\n                pressed={cameraToggle.enabled}\n                pending={cameraToggle.pending}\n                disabled={cameraToggle.pending}\n                onPressedChange={cameraToggle.toggle}\n                className=\"peer/track relative w-auto rounded-r-none pr-3 pl-3 disabled:opacity-100 md:border-r-0 md:pr-2\"\n              />\n              <hr className=\"bg-separator1 peer-data-[state=off]/track:bg-separatorSerious relative z-10 -mr-px hidden h-4 w-px md:block\" />\n              <DeviceSelect\n                size=\"sm\"\n                kind=\"videoinput\"\n                requestPermissions={false}\n                onMediaDeviceError={onCameraDeviceSelectError}\n                onActiveDeviceChange={handleVideoDeviceChange}\n                className={cn([\n                  'pl-2',\n                  'peer-data-[state=off]/track:text-destructive-foreground',\n                  'hover:text-fg1 focus:text-fg1',\n                  'hover:peer-data-[state=off]/track:text-destructive-foreground focus:peer-data-[state=off]/track:text-destructive-foreground',\n                  'rounded-l-none',\n                ])}\n              />\n            </div>\n          )}\n\n          {capabilities.supportsScreenShare && visibleControls.screenShare && (\n            <div className=\"flex items-center gap-0\">\n              <TrackToggle\n                variant=\"secondary\"\n                source={Track.Source.ScreenShare}\n                pressed={screenShareToggle.enabled}\n                disabled={screenShareToggle.pending}\n                onPressedChange={screenShareToggle.toggle}\n                className=\"relative w-auto\"\n              />\n            </div>\n          )}\n\n          {visibleControls.chat && (\n            <Toggle\n              variant=\"secondary\"\n              aria-label=\"Toggle chat\"\n              pressed={chatOpen}\n              onPressedChange={setChatOpen}\n              disabled={!isAgentAvailable}\n              className=\"aspect-square h-full\"\n            >\n              <ChatTextIcon weight=\"bold\" />\n            </Toggle>\n          )}\n        </div>\n        {visibleControls.leave && (\n          <Button\n            variant=\"destructive\"\n            onClick={onLeave}\n            disabled={isDisconnecting}\n            className=\"font-mono\"\n          >\n            <PhoneDisconnectIcon weight=\"bold\" />\n            <span className=\"hidden md:inline\">END CALL</span>\n            <span className=\"inline md:hidden\">END</span>\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1227, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/livekit/chat/hooks/utils.ts"],"sourcesContent":["import * as React from 'react';\nimport type { MessageFormatter, ReceivedChatMessage } from '@livekit/components-react';\n\nexport const useChatMessage = (entry: ReceivedChatMessage, messageFormatter?: MessageFormatter) => {\n  const formattedMessage = React.useMemo(() => {\n    return messageFormatter ? messageFormatter(entry.message) : entry.message;\n  }, [entry.message, messageFormatter]);\n  const hasBeenEdited = !!entry.editTimestamp;\n  const time = new Date(entry.timestamp);\n  const locale = typeof navigator !== 'undefined' ? navigator.language : 'en-US';\n\n  const name = entry.from?.name && entry.from.name !== '' ? entry.from.name : entry.from?.identity;\n\n  return { message: formattedMessage, hasBeenEdited, time, locale, name };\n};\n"],"names":[],"mappings":";;;;AAAA;;;AAGO,MAAM,iBAAiB,CAAC,OAA4B;QAQ5C,aAA+D;;IAP5E,MAAM,mBAAmB,wKAAa;oDAAC;YACrC,OAAO,mBAAmB,iBAAiB,MAAM,OAAO,IAAI,MAAM,OAAO;QAC3E;mDAAG;QAAC,MAAM,OAAO;QAAE;KAAiB;IACpC,MAAM,gBAAgB,CAAC,CAAC,MAAM,aAAa;IAC3C,MAAM,OAAO,IAAI,KAAK,MAAM,SAAS;IACrC,MAAM,SAAS,OAAO,cAAc,cAAc,UAAU,QAAQ,GAAG;IAEvE,MAAM,OAAO,EAAA,cAAA,MAAM,IAAI,cAAV,kCAAA,YAAY,IAAI,KAAI,MAAM,IAAI,CAAC,IAAI,KAAK,KAAK,MAAM,IAAI,CAAC,IAAI,IAAG,eAAA,MAAM,IAAI,cAAV,mCAAA,aAAY,QAAQ;IAEhG,OAAO;QAAE,SAAS;QAAkB;QAAe;QAAM;QAAQ;IAAK;AACxE;GAXa","debugId":null}},
    {"offset": {"line": 1265, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/livekit/chat/chat-entry.tsx"],"sourcesContent":["import * as React from 'react';\nimport type { MessageFormatter, ReceivedChatMessage } from '@livekit/components-react';\nimport { cn } from '@/lib/utils';\nimport { useChatMessage } from './hooks/utils';\n\nexport interface ChatEntryProps extends React.HTMLAttributes<HTMLLIElement> {\n  /** The chat massage object to display. */\n  entry: ReceivedChatMessage;\n  /** Hide sender name. Useful when displaying multiple consecutive chat messages from the same person. */\n  hideName?: boolean;\n  /** Hide message timestamp. */\n  hideTimestamp?: boolean;\n  /** An optional formatter for the message body. */\n  messageFormatter?: MessageFormatter;\n}\n\nexport const ChatEntry = ({\n  entry,\n  messageFormatter,\n  hideName,\n  hideTimestamp,\n  className,\n  ...props\n}: ChatEntryProps) => {\n  const { message, hasBeenEdited, time, locale, name } = useChatMessage(entry, messageFormatter);\n\n  const isUser = entry.from?.isLocal ?? false;\n  const messageOrigin = isUser ? 'remote' : 'local';\n\n  return (\n    <li\n      data-lk-message-origin={messageOrigin}\n      title={time.toLocaleTimeString(locale, { timeStyle: 'full' })}\n      className={cn('group flex flex-col gap-0.5', className)}\n      {...props}\n    >\n      {(!hideTimestamp || !hideName || hasBeenEdited) && (\n        <span className=\"text-muted-foreground flex text-sm\">\n          {!hideName && <strong className=\"mt-2\">{name}</strong>}\n\n          {!hideTimestamp && (\n            <span className=\"align-self-end ml-auto font-mono text-xs opacity-0 transition-opacity ease-linear group-hover:opacity-100\">\n              {hasBeenEdited && '*'}\n              {time.toLocaleTimeString(locale, { timeStyle: 'short' })}\n            </span>\n          )}\n        </span>\n      )}\n\n      <span className={cn('max-w-4/5 rounded-[20px] p-2', isUser ? 'bg-muted ml-auto' : 'mr-auto')}>\n        {message}\n      </span>\n    </li>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;;AAaO,MAAM,YAAY;QAAC,EACxB,KAAK,EACL,gBAAgB,EAChB,QAAQ,EACR,aAAa,EACb,SAAS,EACT,GAAG,OACY;QAGA;;IAFf,MAAM,EAAE,OAAO,EAAE,aAAa,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,oKAAc,EAAC,OAAO;QAE9D;IAAf,MAAM,SAAS,CAAA,uBAAA,cAAA,MAAM,IAAI,cAAV,kCAAA,YAAY,OAAO,cAAnB,iCAAA,sBAAuB;IACtC,MAAM,gBAAgB,SAAS,WAAW;IAE1C,qBACE,6LAAC;QACC,0BAAwB;QACxB,OAAO,KAAK,kBAAkB,CAAC,QAAQ;YAAE,WAAW;QAAO;QAC3D,WAAW,IAAA,qHAAE,EAAC,+BAA+B;QAC5C,GAAG,KAAK;;YAER,CAAC,CAAC,iBAAiB,CAAC,YAAY,aAAa,mBAC5C,6LAAC;gBAAK,WAAU;;oBACb,CAAC,0BAAY,6LAAC;wBAAO,WAAU;kCAAQ;;;;;;oBAEvC,CAAC,+BACA,6LAAC;wBAAK,WAAU;;4BACb,iBAAiB;4BACjB,KAAK,kBAAkB,CAAC,QAAQ;gCAAE,WAAW;4BAAQ;;;;;;;;;;;;;0BAM9D,6LAAC;gBAAK,WAAW,IAAA,qHAAE,EAAC,gCAAgC,SAAS,qBAAqB;0BAC/E;;;;;;;;;;;;AAIT;GAtCa;;QAQ4C,oKAAc;;;KAR1D","debugId":null}},
    {"offset": {"line": 1352, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/livekit/chat/chat-message-view.tsx"],"sourcesContent":["'use client';\n\nimport { type RefObject, useEffect, useRef } from 'react';\nimport { cn } from '@/lib/utils';\n\nexport function useAutoScroll(scrollContentContainerRef: RefObject<Element | null>) {\n  useEffect(() => {\n    function scrollToBottom() {\n      const { scrollingElement } = document;\n\n      if (scrollingElement) {\n        scrollingElement.scrollTop = scrollingElement.scrollHeight;\n      }\n    }\n\n    if (scrollContentContainerRef.current) {\n      const resizeObserver = new ResizeObserver(scrollToBottom);\n\n      resizeObserver.observe(scrollContentContainerRef.current);\n      scrollToBottom();\n\n      return () => resizeObserver.disconnect();\n    }\n  }, [scrollContentContainerRef]);\n}\ninterface ChatProps extends React.HTMLAttributes<HTMLDivElement> {\n  children?: React.ReactNode;\n  className?: string;\n}\n\nexport const ChatMessageView = ({ className, children, ...props }: ChatProps) => {\n  const scrollContentRef = useRef<HTMLDivElement>(null);\n\n  useAutoScroll(scrollContentRef);\n\n  return (\n    <div ref={scrollContentRef} className={cn('flex flex-col justify-end', className)} {...props}>\n      {children}\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;AAHA;;;AAKO,SAAS,cAAc,yBAAoD;;IAChF,IAAA,0KAAS;mCAAC;YACR,SAAS;gBACP,MAAM,EAAE,gBAAgB,EAAE,GAAG;gBAE7B,IAAI,kBAAkB;oBACpB,iBAAiB,SAAS,GAAG,iBAAiB,YAAY;gBAC5D;YACF;YAEA,IAAI,0BAA0B,OAAO,EAAE;gBACrC,MAAM,iBAAiB,IAAI,eAAe;gBAE1C,eAAe,OAAO,CAAC,0BAA0B,OAAO;gBACxD;gBAEA;+CAAO,IAAM,eAAe,UAAU;;YACxC;QACF;kCAAG;QAAC;KAA0B;AAChC;GAnBgB;AAyBT,MAAM,kBAAkB;QAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAkB;;IAC1E,MAAM,mBAAmB,IAAA,uKAAM,EAAiB;IAEhD,cAAc;IAEd,qBACE,6LAAC;QAAI,KAAK;QAAkB,WAAW,IAAA,qHAAE,EAAC,6BAA6B;QAAa,GAAG,KAAK;kBACzF;;;;;;AAGP;IAVa;;QAGX;;;KAHW","debugId":null}},
    {"offset": {"line": 1421, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/livekit/agent-tile.tsx"],"sourcesContent":["import { type AgentState, BarVisualizer, type TrackReference } from '@livekit/components-react';\nimport { cn } from '@/lib/utils';\n\ninterface AgentAudioTileProps {\n  state: AgentState;\n  audioTrack: TrackReference;\n  className?: string;\n}\n\nexport const AgentTile = ({\n  state,\n  audioTrack,\n  className,\n  ref,\n}: React.ComponentProps<'div'> & AgentAudioTileProps) => {\n  return (\n    <div ref={ref} className={cn(className)}>\n      <BarVisualizer\n        barCount={5}\n        state={state}\n        options={{ minHeight: 5 }}\n        trackRef={audioTrack}\n        className={cn('flex aspect-video w-40 items-center justify-center gap-1')}\n      >\n        <span\n          className={cn([\n            'bg-muted min-h-4 w-4 rounded-full',\n            'origin-center transition-colors duration-250 ease-linear',\n            'data-[lk-highlighted=true]:bg-foreground data-[lk-muted=true]:bg-muted',\n          ])}\n        />\n      </BarVisualizer>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAQO,MAAM,YAAY;QAAC,EACxB,KAAK,EACL,UAAU,EACV,SAAS,EACT,GAAG,EAC+C;IAClD,qBACE,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC;kBAC3B,cAAA,6LAAC,6OAAa;YACZ,UAAU;YACV,OAAO;YACP,SAAS;gBAAE,WAAW;YAAE;YACxB,UAAU;YACV,WAAW,IAAA,qHAAE,EAAC;sBAEd,cAAA,6LAAC;gBACC,WAAW,IAAA,qHAAE,EAAC;oBACZ;oBACA;oBACA;iBACD;;;;;;;;;;;;;;;;AAKX;KAzBa","debugId":null}},
    {"offset": {"line": 1476, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/livekit/avatar-tile.tsx"],"sourcesContent":["import { type TrackReference, VideoTrack } from '@livekit/components-react';\nimport { cn } from '@/lib/utils';\n\ninterface AgentAudioTileProps {\n  videoTrack: TrackReference;\n  className?: string;\n}\n\nexport const AvatarTile = ({\n  videoTrack,\n  className,\n  ref,\n}: React.ComponentProps<'div'> & AgentAudioTileProps) => {\n  return (\n    <div ref={ref} className={cn(className)}>\n      <VideoTrack\n        trackRef={videoTrack}\n        width={videoTrack?.publication.dimensions?.width ?? 0}\n        height={videoTrack?.publication.dimensions?.height ?? 0}\n        className=\"rounded-md\"\n      />\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAOO,MAAM,aAAa;QAAC,EACzB,UAAU,EACV,SAAS,EACT,GAAG,EAC+C;QAKrC,oCACC;QADD,0CACC;IALd,qBACE,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC;kBAC3B,cAAA,6LAAC,uOAAU;YACT,UAAU;YACV,OAAO,CAAA,2CAAA,uBAAA,kCAAA,qCAAA,WAAY,WAAW,CAAC,UAAU,cAAlC,yDAAA,mCAAoC,KAAK,cAAzC,sDAAA,2CAA6C;YACpD,QAAQ,CAAA,4CAAA,uBAAA,kCAAA,sCAAA,WAAY,WAAW,CAAC,UAAU,cAAlC,0DAAA,oCAAoC,MAAM,cAA1C,uDAAA,4CAA8C;YACtD,WAAU;;;;;;;;;;;AAIlB;KAfa","debugId":null}},
    {"offset": {"line": 1519, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/livekit/video-tile.tsx"],"sourcesContent":["import React from 'react';\nimport { motion } from 'motion/react';\nimport { VideoTrack } from '@livekit/components-react';\nimport { cn } from '@/lib/utils';\n\nconst MotionVideoTrack = motion.create(VideoTrack);\n\nexport const VideoTile = ({\n  trackRef,\n  className,\n  ref,\n}: React.ComponentProps<'div'> & React.ComponentProps<typeof VideoTrack>) => {\n  return (\n    <div ref={ref} className={cn('bg-muted overflow-hidden rounded-md', className)}>\n      <MotionVideoTrack\n        trackRef={trackRef}\n        width={trackRef?.publication.dimensions?.width ?? 0}\n        height={trackRef?.publication.dimensions?.height ?? 0}\n        className={cn('h-full w-auto')}\n      />\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;;;;AAEA,MAAM,mBAAmB,uMAAM,CAAC,MAAM,CAAC,uOAAU;KAA3C;AAEC,MAAM,YAAY;QAAC,EACxB,QAAQ,EACR,SAAS,EACT,GAAG,EACmE;QAKzD,kCACC;QADD,wCACC;IALd,qBACE,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,uCAAuC;kBAClE,cAAA,6LAAC;YACC,UAAU;YACV,OAAO,CAAA,yCAAA,qBAAA,gCAAA,mCAAA,SAAU,WAAW,CAAC,UAAU,cAAhC,uDAAA,iCAAkC,KAAK,cAAvC,oDAAA,yCAA2C;YAClD,QAAQ,CAAA,0CAAA,qBAAA,gCAAA,oCAAA,SAAU,WAAW,CAAC,UAAU,cAAhC,wDAAA,kCAAkC,MAAM,cAAxC,qDAAA,0CAA4C;YACpD,WAAW,IAAA,qHAAE,EAAC;;;;;;;;;;;AAItB;MAfa","debugId":null}},
    {"offset": {"line": 1567, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/livekit/media-tiles.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { Track } from 'livekit-client';\nimport { AnimatePresence, motion } from 'motion/react';\nimport {\n  type TrackReference,\n  useLocalParticipant,\n  useTracks,\n  useVoiceAssistant,\n} from '@livekit/components-react';\nimport { cn } from '@/lib/utils';\nimport { AgentTile } from './agent-tile';\nimport { AvatarTile } from './avatar-tile';\nimport { VideoTile } from './video-tile';\n\nconst MotionVideoTile = motion.create(VideoTile);\nconst MotionAgentTile = motion.create(AgentTile);\nconst MotionAvatarTile = motion.create(AvatarTile);\n\nconst animationProps = {\n  initial: {\n    opacity: 0,\n    scale: 0,\n  },\n  animate: {\n    opacity: 1,\n    scale: 1,\n  },\n  exit: {\n    opacity: 0,\n    scale: 0,\n  },\n  transition: {\n    type: 'spring',\n    stiffness: 675,\n    damping: 75,\n    mass: 1,\n  },\n};\n\nconst classNames = {\n  // GRID\n  // 2 Columns x 3 Rows\n  grid: [\n    'h-full w-full',\n    'grid gap-x-2 place-content-center',\n    'grid-cols-[1fr_1fr] grid-rows-[90px_1fr_90px]',\n  ],\n  // Agent\n  // chatOpen: true,\n  // hasSecondTile: true\n  // layout: Column 1 / Row 1\n  // align: x-end y-center\n  agentChatOpenWithSecondTile: ['col-start-1 row-start-1', 'self-center justify-self-end'],\n  // Agent\n  // chatOpen: true,\n  // hasSecondTile: false\n  // layout: Column 1 / Row 1 / Column-Span 2\n  // align: x-center y-center\n  agentChatOpenWithoutSecondTile: ['col-start-1 row-start-1', 'col-span-2', 'place-content-center'],\n  // Agent\n  // chatOpen: false\n  // layout: Column 1 / Row 1 / Column-Span 2 / Row-Span 3\n  // align: x-center y-center\n  agentChatClosed: ['col-start-1 row-start-1', 'col-span-2 row-span-3', 'place-content-center'],\n  // Second tile\n  // chatOpen: true,\n  // hasSecondTile: true\n  // layout: Column 2 / Row 1\n  // align: x-start y-center\n  secondTileChatOpen: ['col-start-2 row-start-1', 'self-center justify-self-start'],\n  // Second tile\n  // chatOpen: false,\n  // hasSecondTile: false\n  // layout: Column 2 / Row 2\n  // align: x-end y-end\n  secondTileChatClosed: ['col-start-2 row-start-3', 'place-content-end'],\n};\n\nexport function useLocalTrackRef(source: Track.Source) {\n  const { localParticipant } = useLocalParticipant();\n  const publication = localParticipant.getTrackPublication(source);\n  const trackRef = useMemo<TrackReference | undefined>(\n    () => (publication ? { source, participant: localParticipant, publication } : undefined),\n    [source, publication, localParticipant]\n  );\n  return trackRef;\n}\n\ninterface MediaTilesProps {\n  chatOpen: boolean;\n}\n\nexport function MediaTiles({ chatOpen }: MediaTilesProps) {\n  const {\n    state: agentState,\n    audioTrack: agentAudioTrack,\n    videoTrack: agentVideoTrack,\n  } = useVoiceAssistant();\n  const [screenShareTrack] = useTracks([Track.Source.ScreenShare]);\n  const cameraTrack: TrackReference | undefined = useLocalTrackRef(Track.Source.Camera);\n\n  const isCameraEnabled = cameraTrack && !cameraTrack.publication.isMuted;\n  const isScreenShareEnabled = screenShareTrack && !screenShareTrack.publication.isMuted;\n  const hasSecondTile = isCameraEnabled || isScreenShareEnabled;\n\n  const transition = {\n    ...animationProps.transition,\n    delay: chatOpen ? 0 : 0.15, // delay on close\n  };\n  const agentAnimate = {\n    ...animationProps.animate,\n    scale: chatOpen ? 1 : 3,\n    transition,\n  };\n  const avatarAnimate = {\n    ...animationProps.animate,\n    transition,\n  };\n  const agentLayoutTransition = transition;\n  const avatarLayoutTransition = transition;\n\n  const isAvatar = agentVideoTrack !== undefined;\n\n  return (\n    <div className=\"pointer-events-none fixed inset-x-0 top-8 bottom-32 z-50 md:top-12 md:bottom-40\">\n      <div className=\"relative mx-auto h-full max-w-2xl px-4 md:px-0\">\n        <div className={cn(classNames.grid)}>\n          {/* agent */}\n          <div\n            className={cn([\n              'grid',\n              // 'bg-[hotpink]', // for debugging\n              !chatOpen && classNames.agentChatClosed,\n              chatOpen && hasSecondTile && classNames.agentChatOpenWithSecondTile,\n              chatOpen && !hasSecondTile && classNames.agentChatOpenWithoutSecondTile,\n            ])}\n          >\n            <AnimatePresence mode=\"popLayout\">\n              {!isAvatar && (\n                // audio-only agent\n                <MotionAgentTile\n                  key=\"agent\"\n                  layoutId=\"agent\"\n                  {...animationProps}\n                  animate={agentAnimate}\n                  transition={agentLayoutTransition}\n                  state={agentState}\n                  audioTrack={agentAudioTrack}\n                  className={cn(chatOpen ? 'h-[90px]' : 'h-auto w-full')}\n                />\n              )}\n              {isAvatar && (\n                // avatar agent\n                <MotionAvatarTile\n                  key=\"avatar\"\n                  layoutId=\"avatar\"\n                  {...animationProps}\n                  animate={avatarAnimate}\n                  transition={avatarLayoutTransition}\n                  videoTrack={agentVideoTrack}\n                  className={cn(\n                    chatOpen ? 'h-[90px] [&>video]:h-[90px] [&>video]:w-auto' : 'h-auto w-full'\n                  )}\n                />\n              )}\n            </AnimatePresence>\n          </div>\n\n          <div\n            className={cn([\n              'grid',\n              chatOpen && classNames.secondTileChatOpen,\n              !chatOpen && classNames.secondTileChatClosed,\n            ])}\n          >\n            {/* camera */}\n            <AnimatePresence>\n              {cameraTrack && isCameraEnabled && (\n                <MotionVideoTile\n                  key=\"camera\"\n                  layout=\"position\"\n                  layoutId=\"camera\"\n                  {...animationProps}\n                  trackRef={cameraTrack}\n                  transition={{\n                    ...animationProps.transition,\n                    delay: chatOpen ? 0 : 0.15,\n                  }}\n                  className=\"h-[90px]\"\n                />\n              )}\n              {/* screen */}\n              {isScreenShareEnabled && (\n                <MotionVideoTile\n                  key=\"screen\"\n                  layout=\"position\"\n                  layoutId=\"screen\"\n                  {...animationProps}\n                  trackRef={screenShareTrack}\n                  transition={{\n                    ...animationProps.transition,\n                    delay: chatOpen ? 0 : 0.15,\n                  }}\n                  className=\"h-[90px]\"\n                />\n              )}\n            </AnimatePresence>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1867, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/hooks/useChatAndTranscription.ts"],"sourcesContent":["import { useMemo } from 'react';\nimport {\n  type ReceivedChatMessage,\n  type TextStreamData,\n  useChat,\n  useRoomContext,\n  useTranscriptions,\n} from '@livekit/components-react';\nimport { transcriptionToChatMessage } from '@/lib/utils';\n\nexport default function useChatAndTranscription() {\n  const transcriptions: TextStreamData[] = useTranscriptions();\n  const chat = useChat();\n  const room = useRoomContext();\n\n  const mergedTranscriptions = useMemo(() => {\n    const merged: Array<ReceivedChatMessage> = [\n      ...transcriptions.map((transcription) => transcriptionToChatMessage(transcription, room)),\n      ...chat.chatMessages,\n    ];\n    return merged.sort((a, b) => a.timestamp - b.timestamp);\n  }, [transcriptions, chat.chatMessages, room]);\n\n  return { messages: mergedTranscriptions, send: chat.send };\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AAOA;;;;;AAEe,SAAS;;IACtB,MAAM,iBAAmC,IAAA,mPAAiB;IAC1D,MAAM,OAAO,IAAA,4NAAO;IACpB,MAAM,OAAO,IAAA,6OAAc;IAE3B,MAAM,uBAAuB,IAAA,wKAAO;iEAAC;YACnC,MAAM,SAAqC;mBACtC,eAAe,GAAG;6EAAC,CAAC,gBAAkB,IAAA,6IAA0B,EAAC,eAAe;;mBAChF,KAAK,YAAY;aACrB;YACD,OAAO,OAAO,IAAI;yEAAC,CAAC,GAAG,IAAM,EAAE,SAAS,GAAG,EAAE,SAAS;;QACxD;gEAAG;QAAC;QAAgB,KAAK,YAAY;QAAE;KAAK;IAE5C,OAAO;QAAE,UAAU;QAAsB,MAAM,KAAK,IAAI;IAAC;AAC3D;GAdwB;;QACmB,mPAAiB;QAC7C,4NAAO;QACP,6OAAc","debugId":null}},
    {"offset": {"line": 1921, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/hooks/useDebug.ts"],"sourcesContent":["import * as React from 'react';\nimport { LogLevel, setLogLevel } from 'livekit-client';\nimport { useRoomContext } from '@livekit/components-react';\n\nexport const useDebugMode = (options: { logLevel?: LogLevel; enabled?: boolean } = {}) => {\n  const room = useRoomContext();\n  const logLevel = options.logLevel ?? 'debug';\n  const enabled = options.enabled ?? true;\n\n  React.useEffect(() => {\n    if (!enabled) {\n      setLogLevel('silent');\n      return;\n    }\n\n    setLogLevel(logLevel ?? 'debug');\n\n    // @ts-expect-error\n    window.__lk_room = room;\n\n    return () => {\n      // @ts-expect-error\n      window.__lk_room = undefined;\n      setLogLevel('silent');\n    };\n  }, [room, enabled, logLevel]);\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEO,MAAM,eAAe;QAAC,2EAAsD,CAAC;;IAClF,MAAM,OAAO,IAAA,6OAAc;QACV;IAAjB,MAAM,WAAW,CAAA,oBAAA,QAAQ,QAAQ,cAAhB,+BAAA,oBAAoB;QACrB;IAAhB,MAAM,UAAU,CAAA,mBAAA,QAAQ,OAAO,cAAf,8BAAA,mBAAmB;IAEnC,0KAAe;kCAAC;YACd,IAAI,CAAC,SAAS;gBACZ,IAAA,wLAAW,EAAC;gBACZ;YACF;YAEA,IAAA,wLAAW,EAAC,qBAAA,sBAAA,WAAY;YAExB,mBAAmB;YACnB,OAAO,SAAS,GAAG;YAEnB;0CAAO;oBACL,mBAAmB;oBACnB,OAAO,SAAS,GAAG;oBACnB,IAAA,wLAAW,EAAC;gBACd;;QACF;iCAAG;QAAC;QAAM;QAAS;KAAS;AAC9B;GAtBa;;QACE,6OAAc","debugId":null}},
    {"offset": {"line": 1975, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/session-view.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { AnimatePresence, motion } from 'motion/react';\nimport {\n  type AgentState,\n  type ReceivedChatMessage,\n  useRoomContext,\n  useVoiceAssistant,\n} from '@livekit/components-react';\nimport { toastAlert } from '@/components/alert-toast';\nimport { AgentControlBar } from '@/components/livekit/agent-control-bar/agent-control-bar';\nimport { ChatEntry } from '@/components/livekit/chat/chat-entry';\nimport { ChatMessageView } from '@/components/livekit/chat/chat-message-view';\nimport { MediaTiles } from '@/components/livekit/media-tiles';\nimport useChatAndTranscription from '@/hooks/useChatAndTranscription';\nimport { useDebugMode } from '@/hooks/useDebug';\nimport type { AppConfig } from '@/lib/types';\nimport { cn } from '@/lib/utils';\n\nfunction isAgentAvailable(agentState: AgentState) {\n  return agentState == 'listening' || agentState == 'thinking' || agentState == 'speaking';\n}\n\ninterface SessionViewProps {\n  appConfig: AppConfig;\n  disabled: boolean;\n  sessionStarted: boolean;\n}\n\nexport const SessionView = ({\n  appConfig,\n  disabled,\n  sessionStarted,\n  ref,\n}: React.ComponentProps<'div'> & SessionViewProps) => {\n  const { state: agentState } = useVoiceAssistant();\n  const [chatOpen, setChatOpen] = useState(false);\n  const { messages, send } = useChatAndTranscription();\n  const room = useRoomContext();\n\n  useDebugMode({\n    enabled: process.env.NODE_END !== 'production',\n  });\n\n  async function handleSendMessage(message: string) {\n    await send(message);\n  }\n\n  useEffect(() => {\n    if (sessionStarted) {\n      const timeout = setTimeout(() => {\n        if (!isAgentAvailable(agentState)) {\n          const reason =\n            agentState === 'connecting'\n              ? 'Agent did not join the room. '\n              : 'Agent connected but did not complete initializing. ';\n\n          toastAlert({\n            title: 'Session ended',\n            description: (\n              <p className=\"w-full\">\n                {reason}\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href=\"https://docs.livekit.io/agents/start/voice-ai/\"\n                  className=\"whitespace-nowrap underline\"\n                >\n                  See quickstart guide\n                </a>\n                .\n              </p>\n            ),\n          });\n          room.disconnect();\n        }\n      }, 20_000);\n\n      return () => clearTimeout(timeout);\n    }\n  }, [agentState, sessionStarted, room]);\n\n  const { supportsChatInput, supportsVideoInput, supportsScreenShare } = appConfig;\n  const capabilities = {\n    supportsChatInput,\n    supportsVideoInput,\n    supportsScreenShare,\n  };\n\n  return (\n    <section\n      ref={ref}\n      inert={disabled}\n      className={cn(\n        'opacity-0',\n        // prevent page scrollbar\n        // when !chatOpen due to 'translate-y-20'\n        !chatOpen && 'max-h-svh overflow-hidden'\n      )}\n    >\n      <ChatMessageView\n        className={cn(\n          'mx-auto min-h-svh w-full max-w-2xl px-3 pt-32 pb-40 transition-[opacity,translate] duration-300 ease-out md:px-0 md:pt-36 md:pb-48',\n          chatOpen ? 'translate-y-0 opacity-100 delay-200' : 'translate-y-20 opacity-0'\n        )}\n      >\n        <div className=\"space-y-3 whitespace-pre-wrap\">\n          <AnimatePresence>\n            {messages.map((message: ReceivedChatMessage) => (\n              <motion.div\n                key={message.id}\n                initial={{ opacity: 0, height: 0 }}\n                animate={{ opacity: 1, height: 'auto' }}\n                exit={{ opacity: 1, height: 'auto', translateY: 0.001 }}\n                transition={{ duration: 0.5, ease: 'easeOut' }}\n              >\n                <ChatEntry hideName key={message.id} entry={message} />\n              </motion.div>\n            ))}\n          </AnimatePresence>\n        </div>\n      </ChatMessageView>\n\n      <div className=\"bg-background mp-12 fixed top-0 right-0 left-0 h-32 md:h-36\">\n        {/* skrim */}\n        <div className=\"from-background absolute bottom-0 left-0 h-12 w-full translate-y-full bg-gradient-to-b to-transparent\" />\n      </div>\n\n      <MediaTiles chatOpen={chatOpen} />\n\n      <div className=\"bg-background fixed right-0 bottom-0 left-0 z-50 px-3 pt-2 pb-3 md:px-12 md:pb-12\">\n        <motion.div\n          key=\"control-bar\"\n          initial={{ opacity: 0, translateY: '100%' }}\n          animate={{\n            opacity: sessionStarted ? 1 : 0,\n            translateY: sessionStarted ? '0%' : '100%',\n          }}\n          transition={{ duration: 0.3, delay: sessionStarted ? 0.5 : 0, ease: 'easeOut' }}\n        >\n          <div className=\"relative z-10 mx-auto w-full max-w-2xl\">\n            {appConfig.isPreConnectBufferEnabled && (\n              <motion.div\n                initial={{ opacity: 0 }}\n                animate={{\n                  opacity: sessionStarted && messages.length === 0 ? 1 : 0,\n                  transition: {\n                    ease: 'easeIn',\n                    delay: messages.length > 0 ? 0 : 0.8,\n                    duration: messages.length > 0 ? 0.2 : 0.5,\n                  },\n                }}\n                aria-hidden={messages.length > 0}\n                className={cn(\n                  'absolute inset-x-0 -top-12 text-center',\n                  sessionStarted && messages.length === 0 && 'pointer-events-none'\n                )}\n              >\n                <p className=\"animate-text-shimmer inline-block !bg-clip-text text-sm font-semibold text-transparent\">\n                  Agent is listening, ask it a question\n                </p>\n              </motion.div>\n            )}\n\n            <AgentControlBar\n              capabilities={capabilities}\n              onChatOpenChange={setChatOpen}\n              onSendMessage={handleSendMessage}\n            />\n          </div>\n          {/* skrim */}\n          <div className=\"from-background border-background absolute top-0 left-0 h-12 w-full -translate-y-full bg-gradient-to-t to-transparent\" />\n        </motion.div>\n      </div>\n    </section>\n  );\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2260, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/ui/sonner.tsx"],"sourcesContent":["'use client';\n\nimport { useTheme } from 'next-themes';\nimport { Toaster as Sonner, ToasterProps } from 'sonner';\nimport { WarningIcon } from '@phosphor-icons/react/dist/ssr';\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = 'system' } = useTheme();\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps['theme']}\n      className=\"toaster group\"\n      position=\"top-center\"\n      icons={{\n        warning: <WarningIcon weight=\"bold\" />,\n      }}\n      style={\n        {\n          '--normal-bg': 'var(--popover)',\n          '--normal-text': 'var(--popover-foreground)',\n          '--normal-border': 'var(--border)',\n        } as React.CSSProperties\n      }\n      {...props}\n    />\n  );\n};\n\nexport { Toaster };\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMA,MAAM,UAAU;QAAC,EAAE,GAAG,OAAqB;;IACzC,MAAM,EAAE,QAAQ,QAAQ,EAAE,GAAG,IAAA,+JAAQ;IAErC,qBACE,6LAAC,sJAAM;QACL,OAAO;QACP,WAAU;QACV,UAAS;QACT,OAAO;YACL,uBAAS,6LAAC,8LAAW;gBAAC,QAAO;;;;;;QAC/B;QACA,OACE;YACE,eAAe;YACf,iBAAiB;YACjB,mBAAmB;QACrB;QAED,GAAG,KAAK;;;;;;AAGf;GArBM;;QACyB,+JAAQ;;;KADjC","debugId":null}},
    {"offset": {"line": 2319, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/welcome.tsx"],"sourcesContent":["import { Button } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\n\ninterface WelcomeProps {\n  disabled: boolean;\n  startButtonText: string;\n  onStartCall: () => void;\n}\n\nexport const Welcome = ({\n  disabled,\n  startButtonText,\n  onStartCall,\n  ref,\n}: React.ComponentProps<'div'> & WelcomeProps) => {\n  return (\n    <section\n      ref={ref}\n      inert={disabled}\n      className={cn(\n        'bg-background fixed inset-0 mx-auto flex h-svh flex-col items-center justify-center text-center',\n        disabled ? 'z-10' : 'z-20'\n      )}\n    >\n      <svg\n        width=\"64\"\n        height=\"64\"\n        viewBox=\"0 0 64 64\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        className=\"text-fg0 mb-4 size-16\"\n      >\n        <path\n          d=\"M15 24V40C15 40.7957 14.6839 41.5587 14.1213 42.1213C13.5587 42.6839 12.7956 43 12 43C11.2044 43 10.4413 42.6839 9.87868 42.1213C9.31607 41.5587 9 40.7957 9 40V24C9 23.2044 9.31607 22.4413 9.87868 21.8787C10.4413 21.3161 11.2044 21 12 21C12.7956 21 13.5587 21.3161 14.1213 21.8787C14.6839 22.4413 15 23.2044 15 24ZM22 5C21.2044 5 20.4413 5.31607 19.8787 5.87868C19.3161 6.44129 19 7.20435 19 8V56C19 56.7957 19.3161 57.5587 19.8787 58.1213C20.4413 58.6839 21.2044 59 22 59C22.7956 59 23.5587 58.6839 24.1213 58.1213C24.6839 57.5587 25 56.7957 25 56V8C25 7.20435 24.6839 6.44129 24.1213 5.87868C23.5587 5.31607 22.7956 5 22 5ZM32 13C31.2044 13 30.4413 13.3161 29.8787 13.8787C29.3161 14.4413 29 15.2044 29 16V48C29 48.7957 29.3161 49.5587 29.8787 50.1213C30.4413 50.6839 31.2044 51 32 51C32.7956 51 33.5587 50.6839 34.1213 50.1213C34.6839 49.5587 35 48.7957 35 48V16C35 15.2044 34.6839 14.4413 34.1213 13.8787C33.5587 13.3161 32.7956 13 32 13ZM42 21C41.2043 21 40.4413 21.3161 39.8787 21.8787C39.3161 22.4413 39 23.2044 39 24V40C39 40.7957 39.3161 41.5587 39.8787 42.1213C40.4413 42.6839 41.2043 43 42 43C42.7957 43 43.5587 42.6839 44.1213 42.1213C44.6839 41.5587 45 40.7957 45 40V24C45 23.2044 44.6839 22.4413 44.1213 21.8787C43.5587 21.3161 42.7957 21 42 21ZM52 17C51.2043 17 50.4413 17.3161 49.8787 17.8787C49.3161 18.4413 49 19.2044 49 20V44C49 44.7957 49.3161 45.5587 49.8787 46.1213C50.4413 46.6839 51.2043 47 52 47C52.7957 47 53.5587 46.6839 54.1213 46.1213C54.6839 45.5587 55 44.7957 55 44V20C55 19.2044 54.6839 18.4413 54.1213 17.8787C53.5587 17.3161 52.7957 17 52 17Z\"\n          fill=\"currentColor\"\n        />\n      </svg>\n\n      <p className=\"text-fg1 max-w-prose pt-1 leading-6 font-medium\">\n        Chat live with your voice AI agent\n      </p>\n      <Button variant=\"primary\" size=\"lg\" onClick={onStartCall} className=\"mt-6 w-64 font-mono\">\n        {startButtonText}\n      </Button>\n      <footer className=\"fixed bottom-5 left-0 z-20 flex w-full items-center justify-center\">\n        <p className=\"text-fg1 max-w-prose pt-1 text-xs leading-5 font-normal text-pretty md:text-sm\">\n          Need help getting set up? Check out the{' '}\n          <a\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            href=\"https://docs.livekit.io/agents/start/voice-ai/\"\n            className=\"underline\"\n          >\n            Voice AI quickstart\n          </a>\n          .\n        </p>\n      </footer>\n    </section>\n  );\n};\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAQO,MAAM,UAAU;QAAC,EACtB,QAAQ,EACR,eAAe,EACf,WAAW,EACX,GAAG,EACwC;IAC3C,qBACE,6LAAC;QACC,KAAK;QACL,OAAO;QACP,WAAW,IAAA,qHAAE,EACX,mGACA,WAAW,SAAS;;0BAGtB,6LAAC;gBACC,OAAM;gBACN,QAAO;gBACP,SAAQ;gBACR,MAAK;gBACL,OAAM;gBACN,WAAU;0BAEV,cAAA,6LAAC;oBACC,GAAE;oBACF,MAAK;;;;;;;;;;;0BAIT,6LAAC;gBAAE,WAAU;0BAAkD;;;;;;0BAG/D,6LAAC,wIAAM;gBAAC,SAAQ;gBAAU,MAAK;gBAAK,SAAS;gBAAa,WAAU;0BACjE;;;;;;0BAEH,6LAAC;gBAAO,WAAU;0BAChB,cAAA,6LAAC;oBAAE,WAAU;;wBAAiF;wBACpD;sCACxC,6LAAC;4BACC,QAAO;4BACP,KAAI;4BACJ,MAAK;4BACL,WAAU;sCACX;;;;;;wBAEG;;;;;;;;;;;;;;;;;;AAMd;KAnDa","debugId":null}},
    {"offset": {"line": 2422, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/hooks/useConnectionDetails.ts"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport { decodeJwt } from 'jose';\nimport { ConnectionDetails } from '@/app/api/connection-details/route';\nimport { AppConfig } from '@/lib/types';\n\nconst ONE_MINUTE_IN_MILLISECONDS = 60 * 1000;\n\nexport default function useConnectionDetails(appConfig: AppConfig) {\n  // Generate room connection details, including:\n  //   - A random Room name\n  //   - A random Participant name\n  //   - An Access Token to permit the participant to join the room\n  //   - The URL of the LiveKit server to connect to\n  //\n  // In real-world application, you would likely allow the user to specify their\n  // own participant name, and possibly to choose from existing rooms to join.\n\n  const [connectionDetails, setConnectionDetails] = useState<ConnectionDetails | null>(null);\n\n  const fetchConnectionDetails = useCallback(async () => {\n    setConnectionDetails(null);\n    const url = new URL(\n      process.env.NEXT_PUBLIC_CONN_DETAILS_ENDPOINT ?? '/api/connection-details',\n      window.location.origin\n    );\n\n    let data: ConnectionDetails;\n    try {\n      const res = await fetch(url.toString(), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-Sandbox-Id': appConfig.sandboxId ?? '',\n        },\n        body: JSON.stringify({\n          room_config: appConfig.agentName\n            ? {\n                agents: [{ agent_name: appConfig.agentName }],\n              }\n            : undefined,\n        }),\n      });\n      data = await res.json();\n    } catch (error) {\n      console.error('Error fetching connection details:', error);\n      throw new Error('Error fetching connection details!');\n    }\n\n    setConnectionDetails(data);\n    return data;\n  }, []);\n\n  useEffect(() => {\n    fetchConnectionDetails();\n  }, [fetchConnectionDetails]);\n\n  const isConnectionDetailsExpired = useCallback(() => {\n    const token = connectionDetails?.participantToken;\n    if (!token) {\n      return true;\n    }\n\n    const jwtPayload = decodeJwt(token);\n    if (!jwtPayload.exp) {\n      return true;\n    }\n    const expiresAt = new Date(jwtPayload.exp * 1000 - ONE_MINUTE_IN_MILLISECONDS);\n\n    const now = new Date();\n    return expiresAt <= now;\n  }, [connectionDetails?.participantToken]);\n\n  const existingOrRefreshConnectionDetails = useCallback(async () => {\n    if (isConnectionDetailsExpired() || !connectionDetails) {\n      return fetchConnectionDetails();\n    } else {\n      return connectionDetails;\n    }\n  }, [connectionDetails, fetchConnectionDetails, isConnectionDetailsExpired]);\n\n  return {\n    connectionDetails,\n    refreshConnectionDetails: fetchConnectionDetails,\n    existingOrRefreshConnectionDetails,\n  };\n}\n"],"names":[],"mappings":";;;;AAsBM;AAtBN;AACA;;;;AAIA,MAAM,6BAA6B,KAAK;AAEzB,SAAS,qBAAqB,SAAoB;;IAC/D,+CAA+C;IAC/C,yBAAyB;IACzB,gCAAgC;IAChC,iEAAiE;IACjE,kDAAkD;IAClD,EAAE;IACF,8EAA8E;IAC9E,4EAA4E;IAE5E,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAA2B;IAErF,MAAM,yBAAyB,IAAA,4KAAW;oEAAC;YACzC,qBAAqB;gBAEnB;YADF,MAAM,MAAM,IAAI,IACd,CAAA,iDAAA,2KAAO,CAAC,GAAG,CAAC,iCAAiC,cAA7C,4DAAA,iDAAiD,2BACjD,OAAO,QAAQ,CAAC,MAAM;YAGxB,IAAI;YACJ,IAAI;oBAKkB;gBAJpB,MAAM,MAAM,MAAM,MAAM,IAAI,QAAQ,IAAI;oBACtC,QAAQ;oBACR,SAAS;wBACP,gBAAgB;wBAChB,gBAAgB,CAAA,uBAAA,UAAU,SAAS,cAAnB,kCAAA,uBAAuB;oBACzC;oBACA,MAAM,KAAK,SAAS,CAAC;wBACnB,aAAa,UAAU,SAAS,GAC5B;4BACE,QAAQ;gCAAC;oCAAE,YAAY,UAAU,SAAS;gCAAC;6BAAE;wBAC/C,IACA;oBACN;gBACF;gBACA,OAAO,MAAM,IAAI,IAAI;YACvB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,sCAAsC;gBACpD,MAAM,IAAI,MAAM;YAClB;YAEA,qBAAqB;YACrB,OAAO;QACT;mEAAG,EAAE;IAEL,IAAA,0KAAS;0CAAC;YACR;QACF;yCAAG;QAAC;KAAuB;IAE3B,MAAM,6BAA6B,IAAA,4KAAW;wEAAC;YAC7C,MAAM,QAAQ,8BAAA,wCAAA,kBAAmB,gBAAgB;YACjD,IAAI,CAAC,OAAO;gBACV,OAAO;YACT;YAEA,MAAM,aAAa,IAAA,4KAAS,EAAC;YAC7B,IAAI,CAAC,WAAW,GAAG,EAAE;gBACnB,OAAO;YACT;YACA,MAAM,YAAY,IAAI,KAAK,WAAW,GAAG,GAAG,OAAO;YAEnD,MAAM,MAAM,IAAI;YAChB,OAAO,aAAa;QACtB;uEAAG;QAAC,8BAAA,wCAAA,kBAAmB,gBAAgB;KAAC;IAExC,MAAM,qCAAqC,IAAA,4KAAW;gFAAC;YACrD,IAAI,gCAAgC,CAAC,mBAAmB;gBACtD,OAAO;YACT,OAAO;gBACL,OAAO;YACT;QACF;+EAAG;QAAC;QAAmB;QAAwB;KAA2B;IAE1E,OAAO;QACL;QACA,0BAA0B;QAC1B;IACF;AACF;GA9EwB","debugId":null}},
    {"offset": {"line": 2528, "column": 0}, "map": {"version":3,"sources":["file:///Users/ashutosh/Attack%20Capital/assignment/frontend/components/app.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useMemo, useState } from 'react';\nimport { Room, RoomEvent } from 'livekit-client';\nimport { motion } from 'motion/react';\nimport { RoomAudioRenderer, RoomContext, StartAudio } from '@livekit/components-react';\nimport { toastAlert } from '@/components/alert-toast';\nimport { SessionView } from '@/components/session-view';\nimport { Toaster } from '@/components/ui/sonner';\nimport { Welcome } from '@/components/welcome';\nimport useConnectionDetails from '@/hooks/useConnectionDetails';\nimport type { AppConfig } from '@/lib/types';\n\nconst MotionWelcome = motion.create(Welcome);\nconst MotionSessionView = motion.create(SessionView);\n\ninterface AppProps {\n  appConfig: AppConfig;\n}\n\nexport function App({ appConfig }: AppProps) {\n  const room = useMemo(() => new Room(), []);\n  const [sessionStarted, setSessionStarted] = useState(false);\n  const { refreshConnectionDetails, existingOrRefreshConnectionDetails } =\n    useConnectionDetails(appConfig);\n\n  useEffect(() => {\n    const onDisconnected = () => {\n      setSessionStarted(false);\n      refreshConnectionDetails();\n    };\n    const onMediaDevicesError = (error: Error) => {\n      toastAlert({\n        title: 'Encountered an error with your media devices',\n        description: `${error.name}: ${error.message}`,\n      });\n    };\n    room.on(RoomEvent.MediaDevicesError, onMediaDevicesError);\n    room.on(RoomEvent.Disconnected, onDisconnected);\n    return () => {\n      room.off(RoomEvent.Disconnected, onDisconnected);\n      room.off(RoomEvent.MediaDevicesError, onMediaDevicesError);\n    };\n  }, [room, refreshConnectionDetails]);\n\n  useEffect(() => {\n    let aborted = false;\n    if (sessionStarted && room.state === 'disconnected') {\n      Promise.all([\n        room.localParticipant.setMicrophoneEnabled(true, undefined, {\n          preConnectBuffer: appConfig.isPreConnectBufferEnabled,\n        }),\n        existingOrRefreshConnectionDetails().then((connectionDetails) =>\n          room.connect(connectionDetails.serverUrl, connectionDetails.participantToken)\n        ),\n      ]).catch((error) => {\n        if (aborted) {\n          // Once the effect has cleaned up after itself, drop any errors\n          //\n          // These errors are likely caused by this effect rerunning rapidly,\n          // resulting in a previous run `disconnect` running in parallel with\n          // a current run `connect`\n          return;\n        }\n\n        toastAlert({\n          title: 'There was an error connecting to the agent',\n          description: `${error.name}: ${error.message}`,\n        });\n      });\n    }\n    return () => {\n      aborted = true;\n      room.disconnect();\n    };\n  }, [room, sessionStarted, appConfig.isPreConnectBufferEnabled]);\n\n  const { startButtonText } = appConfig;\n\n  return (\n    <main>\n      <MotionWelcome\n        key=\"welcome\"\n        startButtonText={startButtonText}\n        onStartCall={() => setSessionStarted(true)}\n        disabled={sessionStarted}\n        initial={{ opacity: 1 }}\n        animate={{ opacity: sessionStarted ? 0 : 1 }}\n        transition={{ duration: 0.5, ease: 'linear', delay: sessionStarted ? 0 : 0.5 }}\n      />\n\n      <RoomContext.Provider value={room}>\n        <RoomAudioRenderer />\n        <StartAudio label=\"Start Audio\" />\n        {/* --- */}\n        <MotionSessionView\n          key=\"session-view\"\n          appConfig={appConfig}\n          disabled={!sessionStarted}\n          sessionStarted={sessionStarted}\n          initial={{ opacity: 0 }}\n          animate={{ opacity: sessionStarted ? 1 : 0 }}\n          transition={{\n            duration: 0.5,\n            ease: 'linear',\n            delay: sessionStarted ? 0.5 : 0,\n          }}\n        />\n      </RoomContext.Provider>\n\n      <Toaster />\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}